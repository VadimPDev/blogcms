(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,t){},111:function(e,t){},129:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),i=(a(86),a(6)),s=a(4),u=a(72),m=a.n(u);var o=Object(n.createContext)({token:null,userId:null,login:void 0,logout:void 0,isAuthenticated:!1}),d=a(17),E=a(15),p=a(2),f=a.n(p),v=a(12),b=a(7),g=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),l=Object(s.a)(c,2),i=l[0],u=l[1];return{loading:a,request:Object(n.useCallback)(function(){var e=Object(b.a)(f.a.mark((function e(t){var a,n,c,l,i,s=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"GET",n=s.length>2&&void 0!==s[2]?s[2]:null,c=s.length>3&&void 0!==s[3]?s[3]:{},r(!0),e.prev=4,n&&(n=JSON.stringify(n),c["Content-Type"]=c["Content-Type"]?c["Content-Type"]:"application/json"),e.next=8,fetch(t,{method:a,body:n,headers:c});case 8:return l=e.sent,e.next=11,l.json();case 11:if(i=e.sent,l.ok){e.next=14;break}throw new Error(i.message||i.errors[0].msg||"\u0427\u0442\u043e \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 14:return r(!1),e.abrupt("return",i);case 18:throw e.prev=18,e.t0=e.catch(4),r(!1),u(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:i,clearError:Object(n.useCallback)((function(){return u(null)}),[])}},h=(a(90),a(32)),O=function(){var e=Object(h.useToasts)().addToast;return Object(n.useCallback)((function(t){t&&e(t,{appearance:"error",autoDismiss:!0})}),[e])},j=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(o),i=g(),u=i.request,m=i.error,d=i.clearError,p=O(),h=function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u("/api/auth/login","POST",Object(v.a)({},a));case 3:t=e.sent,l.login(t.token,t.userId),p(t.message),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u("/api/auth/register","POST",Object(v.a)({},a));case 3:t=e.sent,p(t.message),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),w=function(e){c(Object(v.a)({},a,Object(E.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){p(m),d()}),[m,d,p]),r.a.createElement("div",{className:"auth-form"},r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault()}(e)}},r.a.createElement("div",{className:"input-group"},r.a.createElement("span",null,"Email"),r.a.createElement("input",{type:"email",name:"email",value:a.email,onChange:w})),r.a.createElement("div",{className:"input-group"},r.a.createElement("span",null,"Password"),r.a.createElement("input",{type:"password",name:"password",value:a.password,onChange:w})),r.a.createElement("button",{className:"login-button",onClick:h},"Login"),r.a.createElement("button",{className:"register-button",onClick:j},"Register")))},w=a(73),N=a.n(w),x=a(74),y=a.n(x),k=a(26),A=(a(129),function(e){var t=e.item;return r.a.createElement("article",{className:"news-list__item"},r.a.createElement("div",{className:"item-img"},r.a.createElement("img",{src:k.url+t.preview,alt:"item",width:"330px",height:"250px"})),r.a.createElement("div",{className:"item-info"},r.a.createElement("div",{className:"item-date"},y()(t.createdAt).format("MMMM Do YYYY")+"/ Admin"),r.a.createElement("div",{className:"item-title"},t.title,"."),r.a.createElement("div",{className:"item-text"},N()(t.text)),r.a.createElement("div",{className:"item-buttons"},r.a.createElement(i.b,{to:"/detail/"+t._id},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0447\u0438\u0442\u0430\u0442\u044c"))))}),C=function(e){var t=e.news;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement(A,{item:e,key:t})})))},S=(a(132),function(){return r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"lds-facebook"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),_=(a(133),function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],l=g(),i=l.request,u=l.loading,m=Object(n.useCallback)(Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("/api/news/load","GET");case 3:t=e.sent,c(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i]);return Object(n.useEffect)((function(){m()}),[m]),u?r.a.createElement(S,null):r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"news-list"},r.a.createElement(C,{news:a})))}),D=a(77),I=a.n(D),T=(a(145),function(){var e=Object(d.h)().id,t=g(),a=t.request,c=t.loading,l=Object(n.useState)([]),i=Object(s.a)(l,2),u=i[0],m=i[1],o=Object(n.useState)([]),E=Object(s.a)(o,2),p=E[0],v=E[1],h=Object(n.useCallback)(Object(b.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a("/api/news/get/".concat(e),"GET");case 2:n=t.sent,m(n),v(n.images);case 5:case"end":return t.stop()}}),t)}))),[a,e]);return Object(n.useEffect)((function(){h()}),[h]),c?r.a.createElement(S,null):r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"news"},r.a.createElement("div",{className:"news-title"},u.title),r.a.createElement("div",{className:"news-info"},r.a.createElement("div",{className:"news-img"},r.a.createElement("img",{src:k.url+u.preview,alt:"preview",width:"350px",height:"250px"})),r.a.createElement("div",{className:"news-text"},I()("".concat(u.text)))),r.a.createElement("div",{className:"news-images"},p.map((function(e){return r.a.createElement("div",{className:"news-images__item"},r.a.createElement("img",{src:k.url+e.path,alt:"img",width:"250px",height:"150px"}))})))))}),Y=a(79),B=(a(146),a(78)),P=a.n(B),J=function(){var e=Object(d.g)(),t=O(),a=Object(n.useState)({title:"",content:"",category:"",preview:null,images:null}),c=Object(s.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)([]),m=Object(s.a)(u,2),p=m[0],h=m[1],j=g().request,w=Object(n.useContext)(o).token,N=function(){var a=Object(b.a)(f.a.mark((function a(){var n,r,c;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=new FormData,Array.from(l.images).forEach((function(e,t){n.append(t,e)})),r=Array.from(l.preview),n.append("preview",r[0]),n.append("len",l.images.length),n.append("title",l.title),n.append("content",l.content),n.append("category",l.category),a.next=11,P()({method:"POST",url:"/api/news/add",headers:{Authorization:"Bearer ".concat(w)},data:n});case 11:c=a.sent,t(c.data.message),setTimeout((function(){e.push("/")}),3e3),a.next=18;break;case 16:a.prev=16,a.t0=a.catch(0);case 18:case"end":return a.stop()}}),a,null,[[0,16]])})));return function(){return a.apply(this,arguments)}}(),x=function(e){i(Object(v.a)({},l,Object(E.a)({},e.target.name,e.target.value)))},y=function(e){i(Object(v.a)({},l,Object(E.a)({},e.target.name,e.target.files)))},k=Object(n.useCallback)(Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j("/api/category/get","GET");case 3:t=e.sent,h(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[j]);return Object(n.useEffect)((function(){k()}),[k]),r.a.createElement("div",{className:"content"},r.a.createElement("form",{className:"add-form",onSubmit:function(e){return function(e){e.preventDefault()}(e)}},r.a.createElement("div",{className:"input-add"},r.a.createElement("span",null,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"),r.a.createElement("input",{type:"text",name:"title",value:l.title,onChange:function(e){return x(e)}})),r.a.createElement("div",{className:"input-add"},r.a.createElement("span",null,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),r.a.createElement("select",{name:"category",onChange:function(e){return x(e)}},r.a.createElement("option",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"),p.map((function(e,t){return r.a.createElement("option",{name:e.url,key:t},e.title)})))),r.a.createElement("div",{className:"editor"},r.a.createElement(Y.a,{apiKey:"66eiyabx1d4ze58ick0aqe6po9wgetbhpawmzjtwvz3mlbqs",value:l.content,onEditorChange:function(e){return i(Object(v.a)({},l,{content:e}))}})),r.a.createElement("div",{className:"input-add"},r.a.createElement("span",null,"\u041f\u0440\u0435\u0432\u044c\u044e"),r.a.createElement("input",{type:"file",name:"preview",onChange:function(e){return y(e)}})),r.a.createElement("div",{className:"input-add"},r.a.createElement("span",null,"\u0414\u043e\u043f \u0444\u043e\u0442\u043e"),r.a.createElement("input",{type:"file",name:"images",multiple:!0,onChange:function(e){return y(e)}})),r.a.createElement("div",{className:"form-buttons"},r.a.createElement("button",{onClick:N},"Create"))))},U=function(){var e=Object(n.useState)({title:"",url:""}),t=Object(s.a)(e,2),a=t[0],c=t[1],l=g().request,i=Object(n.useContext)(o).token,u=O(),m=function(e){c(Object(v.a)({},a,Object(E.a)({},e.target.name,e.target.value)))},d=function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("/api/category/create","POST",Object(v.a)({},a),{Authorization:"Bearer ".concat(i)});case 3:t=e.sent,u(t.message),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"content"},r.a.createElement("form",{className:"add-form",onSubmit:function(e){return function(e){e.preventDefault()}(e)}},r.a.createElement("div",{className:"input-add"},r.a.createElement("span",null,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"),r.a.createElement("input",{type:"text",name:"title",value:a.title,onChange:function(e){return m(e)}})),r.a.createElement("div",{className:"input-add"},r.a.createElement("span",null,"Url"),r.a.createElement("input",{type:"text",name:"url",value:a.url,onChange:function(e){return m(e)}})),r.a.createElement("div",{className:"form-buttons",style:{paddingBottom:"200px"}},r.a.createElement("button",{onClick:d},"Create"))))},G=(a(163),function(){return r.a.createElement("nav",null,r.a.createElement("div",{className:"navbar-items"},r.a.createElement("div",{className:"navbar-items__item"},r.a.createElement("a",{href:"/"},"Page 1")),r.a.createElement("div",{className:"navbar-items__item"},r.a.createElement("a",{href:"/"},"Page 1")),r.a.createElement("div",{className:"navbar-items__item"},r.a.createElement("a",{href:"/"},"Page 1")),r.a.createElement("div",{className:"navbar-items__item"},r.a.createElement("a",{href:"/"},"Page 1")),r.a.createElement("div",{className:"navbar-items__item"},r.a.createElement("a",{href:"/"},"Page 1"))))}),z=a(28),F=a.n(z),Q=(a(164),function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header-title"},r.a.createElement(i.b,{to:"/"},"Title")),r.a.createElement("div",{className:"header-contacts"},r.a.createElement("div",{className:"header-contacts__item"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{src:F.a,alt:"item"}))),r.a.createElement("div",{className:"header-contacts__item"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{src:F.a,alt:"item"}))),r.a.createElement("div",{className:"header-contacts__item"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{src:F.a,alt:"item"}))),r.a.createElement("div",{className:"header-contacts__item"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{src:F.a,alt:"item"})))))}),V=(a(165),function(e){var t=e.auth,a=g(),c=a.request,l=a.loading,u=Object(n.useState)([]),m=Object(s.a)(u,2),o=m[0],d=m[1],E=Object(n.useCallback)(Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("/api/category/get","GET");case 2:t=e.sent,d(t);case 4:case"end":return e.stop()}}),e)}))),[c]);return Object(n.useEffect)((function(){E()}),[E]),l?r.a.createElement(S,null):t?r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebar-title"},"Admin"),r.a.createElement("ul",{className:"category-items"},r.a.createElement("li",{className:"category-items__item"},r.a.createElement(i.b,{to:"/admin/add"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c")),r.a.createElement("li",{className:"category-items__item"},r.a.createElement(i.b,{to:"/admin/category"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e")),r.a.createElement("li",{className:"category-items__item"},r.a.createElement(i.b,{to:"/admin/news"},"\u0412\u0441\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"))),r.a.createElement("div",{className:"sidebar-title"},"Category"),r.a.createElement("ul",{className:"category-items"},o.map((function(e,t){return r.a.createElement("li",{className:"category-items__item",key:t},r.a.createElement(i.b,{to:"/category/"+e.url},e.title))})))):r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebar-title"},"Category"),r.a.createElement("ul",{className:"category-items"},o.map((function(e,t){return r.a.createElement("li",{className:"category-items__item",key:t},r.a.createElement(i.b,{to:"/category/"+e.url},e.title))}))))});a(166);var R=function(){var e=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),l=Object(s.a)(c,2),i=l[0],u=l[1],o=Object(n.useState)(null),d=Object(s.a)(o,2),E=d[0],p=d[1],f=Object(n.useCallback)((function(e,t){r(e),p(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e}))}),[]),v=Object(n.useCallback)((function(){try{var e=JSON.parse(localStorage.getItem("userData"));return!!e&&!(m()(e.token).exp<((new Date).getTime()+1)/1e3)}catch(t){return!1}}),[]),b=Object(n.useCallback)((function(){r(null),p(null),localStorage.removeItem("userData")}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&(v()||b(),f(e.token,e.userId));u(!0)}),[f,v,b]),{login:f,logout:b,token:a,userId:E,ready:i}}(),t=e.token,a=e.userId,c=e.login,l=e.logout,u=e.ready,E=!!t,p=function(e){return e?r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/",exact:!0},r.a.createElement(_,null)),r.a.createElement(d.b,{path:"/admin/add",exact:!0},r.a.createElement(J,null)),r.a.createElement(d.b,{path:"/admin/category"},r.a.createElement(U,null)),r.a.createElement(d.b,{path:"/detail/:id",exact:!0},r.a.createElement(T,null)),r.a.createElement(d.a,{to:"/"})):r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/admin/auth"},r.a.createElement(j,null)),r.a.createElement(d.b,{path:"/",exact:!0},r.a.createElement(_,null)),r.a.createElement(d.b,{path:"/detail/:id",exact:!0},r.a.createElement(T,null)),r.a.createElement(d.a,{to:"/"}))}(E);return u?r.a.createElement(h.ToastProvider,null,r.a.createElement(o.Provider,{value:{token:t,userId:a,login:c,logout:l,isAuthenticated:E}},r.a.createElement(i.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(Q,null),r.a.createElement(G,null),r.a.createElement("main",null,p,r.a.createElement(V,{auth:E})))))):r.a.createElement(S,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},26:function(e,t){e.exports={url:"http://localhost/"}},28:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAACb0lEQVRoge2ZPUtbURiAn0iNkI9WbaQFPxZxcFCUlDQOQlBQTF3dXNvf4B9ooKlQC+JglxZd3PwAFxclCkkgNZNTioJDbRA0QYOKejuchKQtic05qT0t54Es955z3/e59z33vNzYLMuy+A+wWX19/77I7i51fzuHWmFEdMOI6IYR0Q0johtGRDeMiG4YEd14cG+RJiZgeBiamyGVguVliMfFuSdPwe0SxyWRFxkchKEheDsNufPy4xxOCL+BgQGoyxdAV5eYu7UFTU3Q1gazs0oi8qXV3w/BILyfEXe0HFNTP0oUaGiAkRHo7YWdHSHT3i6djrzIYw/Y7eD1wod5UTY/09MDz7y/SpRSXw+jo5DJwOGhdDryIkdf4eoKbDZxJ0MhmJsDn684prUVnM7K18lkYHoalpakUwGVNbKxAWNjxXKw20UJ+f1wfAwHByLJuzg9hdVV6TQKyIv4fJD4DG43NDYWj9ts0NIifveIvIjHAy+CosZVSKfV5ueRXyPxOJycqEW/uYHUF7Vr5JEXiUZhZQVyOfno2SzEovLzS1Db2T9+Eot1fBw6O8WCr4a9PYhElFIooCaSO4dAALq7q5+bzcL6ulL4UtSbxoWF6jey21vY3tZMJBKBl6/EXpBOw10f9y0LEgl4HVIOXUpt2vhvR7C/D9fXlcdZFiSTEA5XbjQlkFsjfr9o+BwO6OgQrYjbLTbDclxewtoavJupuQTIikSjcHEBk5OiRXG5yo89O4NYDBYXxdP4Q8i/tZLJYmKBADz3w6OHxfOZ/B6xuamU4O9i/rHSDSOiG0ZEN4yIbhgR3TAiumFEdMOI6MZ3yGGjHnMOsnAAAAAASUVORK5CYII="},81:function(e,t,a){e.exports=a(167)},86:function(e,t,a){},90:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.a48611c0.chunk.js.map