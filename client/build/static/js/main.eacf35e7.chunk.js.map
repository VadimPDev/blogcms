{"version":3,"sources":["context/AuthContext.js","hooks/HttpHook.js","containers/Auth/Auth.js","components/NewsItem/NewsItem.js","components/NewsList/NewsList.js","components/Loader/Loader.js","containers/Main/Main.js","containers/DetailPage/DetailPage.js","containers/AddNews/AddNews.js","hooks/MessageHook.js","components/Navbar/Navbar.js","components/Header/Header.js","components/SideBar/SideBar.js","App.js","hooks/AuthHook.js","routes.js","serviceWorker.js","index.js","components/Header/item.png"],"names":["AuthContext","createContext","token","userId","login","noop","logout","isAuthenticated","useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","JSON","stringify","console","log","fetch","response","json","data","ok","Error","message","clearError","Auth","email","password","form","setForm","auth","useContext","loginHandler","registerHandler","changeHandler","event","target","name","value","useEffect","className","onSubmit","preventDefault","submitHandler","type","onChange","onClick","NewsItem","item","src","preview","alt","width","height","moment","createdAt","format","title","renderHtml","text","to","_id","NewsList","news","map","index","key","Loader","Main","setNews","loadNews","DetailPage","newsId","useParams","id","getNews","parse","images","AddNews","history","useHistory","addToast","useToasts","appearance","autoDismiss","useMessage","content","category","createNews","img","FormData","Array","from","forEach","file","i","append","length","axios","Authorization","setTimeout","push","fileUpload","files","apiKey","onEditorChange","multiple","Navbar","href","Header","Item","SideBar","App","setToken","ready","setReady","setUserId","jwtToken","localStorage","setItem","isTokenExpired","getItem","jwt","exp","Date","getTime","err","removeItem","useAuth","routes","path","exact","useRoutes","Provider","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","then","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.eacf35e7.chunk.js","sourcesContent":["import {createContext} from 'react'\r\nfunction noop() {}\r\nexport const AuthContext = createContext({\r\n    token:null,\r\n    userId:null,\r\n    login:noop(),\r\n    logout:noop(),\r\n    isAuthenticated:false\r\n})","import {useState, useCallback} from 'react'\r\nexport const useHttp = () =>{\r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState(null)\r\n    const request = useCallback(async (url,method= 'GET',body= null, headers = {}) =>{\r\n        setLoading(true)\r\n        try {\r\n            if(body){\r\n                body = JSON.stringify(body)\r\n                console.log(headers)\r\n                headers['Content-Type'] = headers['Content-Type'] ? headers['Content-Type'] : 'application/json'\r\n                console.log(headers)\r\n                \r\n            }  \r\n            const response = await fetch(url,{method,body,headers})\r\n            const data = await response.json()\r\n            if(!response.ok){\r\n                throw new Error(data.message || 'Что то пошло не так')\r\n            }\r\n            setLoading(false)\r\n\r\n            return data\r\n        }catch(e){\r\n            setLoading(false)\r\n            setError(e.message)\r\n            throw e\r\n        }\r\n    },[])\r\n\r\n    const clearError = useCallback(() => setError(null),[])\r\n\r\n    return { loading,request,error,clearError}\r\n}","import React, { useState, useEffect, useContext } from 'react'\r\nimport {useHttp} from '../../hooks/HttpHook'\r\nimport {AuthContext} from '../../context/AuthContext'\r\nimport './Auth.css'\r\n\r\nexport const Auth = () =>{\r\n\r\n    const [form,setForm] = useState({email:'',password:''})\r\n    const auth = useContext(AuthContext)\r\n    const {request} = useHttp()\r\n\r\n    const loginHandler = async() =>{\r\n        try{\r\n            const data = await request('/api/auth/login','POST',{...form})\r\n            auth.login(data.token,data.userId)\r\n        }catch(e){\r\n\r\n        }\r\n    }\r\n    const registerHandler = async() =>{\r\n        try{\r\n            const data = await request('/api/auth/register','POST',{...form})\r\n            console.log(data)\r\n        }catch(e){\r\n\r\n        }\r\n    }\r\n    const submitHandler = (event) =>{\r\n        event.preventDefault()\r\n    }\r\n\r\n    const changeHandler = (event) =>{\r\n        setForm({...form,[event.target.name]:event.target.value})\r\n    }\r\n    useEffect(()=>{\r\n        console.log(form)\r\n    },[form])\r\n    return (\r\n        <div className='auth-form'>\r\n            <form onSubmit={event=>submitHandler(event)}>\r\n                <div className='input-group'>\r\n                    <span>Email</span>\r\n                    <input type='email' name='email' value={form.email} onChange={changeHandler}></input>\r\n                </div>\r\n                <div className='input-group'>\r\n                    <span>Password</span>\r\n                    <input type='password' name='password' value={form.password} onChange={changeHandler}></input>\r\n                </div>\r\n                <button className='login-button' onClick={loginHandler}>Login</button>\r\n                <button className='register-button' onClick={registerHandler}>Register</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport renderHtml from 'react-render-html'\r\nimport moment from 'moment'\r\n\r\nimport './NewsItem.css'\r\n\r\nexport const NewsItem = ({item}) =>{\r\n    return (\r\n        <article className=\"news-list__item\">\r\n                    <div className=\"item-img\">\r\n                            <img src={'http://localhost:5000/'+item.preview} alt=\"item\" width='330px' height='250px' />\r\n                    </div>\r\n                    <div className=\"item-info\">\r\n                            <div className=\"item-date\">{moment(item.createdAt).format('MMMM Do YYYY')+ '/ Admin'}</div>\r\n                            <div className=\"item-title\">{item.title}.</div>\r\n                            <div className=\"item-text\">{renderHtml(item.text)}</div>\r\n                            <div className=\"item-buttons\">\r\n                               <Link to={'/detail/'+item._id}>Продолжить читать</Link>\r\n                            </div>\r\n                    </div>\r\n            </article>\r\n    )\r\n}","import React from 'react'\r\nimport { NewsItem } from '../NewsItem/NewsItem'\r\n\r\nexport const NewsList = ({news}) =>{\r\n    return (\r\n        <>\r\n            {news.map((item,index)=>{\r\n                return <NewsItem item={item} key={index}/>\r\n            })}\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport './Loader.css'\r\n\r\nexport const Loader = () =>{\r\n    return (\r\n        <div className='center'><div className=\"lds-facebook\"><div></div><div></div><div></div></div></div>\r\n    )\r\n}","import React, {useState, useEffect, useCallback} from 'react'\r\nimport { NewsList } from '../../components/NewsList/NewsList'\r\nimport {useHttp} from '../../hooks/HttpHook'\r\nimport {Loader} from '../../components/Loader/Loader'\r\nimport './Main.css'\r\n\r\nexport const Main = () =>{\r\n    const [news, setNews] = useState([])\r\n    const {request,loading} = useHttp()\r\n\r\n    const loadNews = useCallback(async()=>{\r\n        try{\r\n            const data = await request('/api/news/load','GET')\r\n            setNews(data)\r\n        }catch(e){}\r\n    },[request])\r\n    useEffect(()=>{\r\n        loadNews()\r\n    },[loadNews])\r\n    if(loading){\r\n        return <Loader />\r\n    }\r\n    return (\r\n        <div className=\"content\">\r\n                <div className=\"news-list\">\r\n                    <NewsList news={news}/>\r\n                </div>\r\n            </div>\r\n    )\r\n}","import React, { useEffect, useCallback, useState } from 'react'\r\nimport {useParams} from 'react-router-dom'\r\nimport { useHttp } from '../../hooks/HttpHook'\r\nimport parse from 'html-react-parser'\r\nimport { Loader } from '../../components/Loader/Loader'\r\nimport './DetailPage.css'\r\n\r\nexport const DetailPage = () =>{\r\n    const newsId = useParams().id\r\n\r\n    const {request,loading} = useHttp()\r\n\r\n    const [news,setNews] = useState({})\r\n\r\n    const getNews = useCallback(async()=>{\r\n        const data = await request(`/api/news/get/${newsId}`,'GET')\r\n        setNews(data)\r\n    },[request,newsId])\r\n\r\n    useEffect(()=>{\r\n        getNews()\r\n    },[getNews])\r\n\r\n    if(loading) {\r\n        return <Loader />\r\n    }\r\n    return (\r\n    <div className='content'>\r\n        <div className=\"news\">\r\n            <div className=\"news-title\">{news.title}</div>\r\n            <div className=\"news-info\">\r\n                <div className=\"news-img\">\r\n                    <img src={'http://localhost:5000/'+news.preview} alt=\"preview\" width='350px' height='250px'/>\r\n                </div>\r\n                <div className=\"news-text\">\r\n                    {parse(`${news.text}`)}\r\n                </div>\r\n            </div>\r\n            <div className=\"news-images\">\r\n                {console.log(news.images)}\r\n            </div>\r\n        </div>\r\n    </div>\r\n    )\r\n}","import React, { useState, useContext } from 'react'\r\nimport {useHistory} from 'react-router-dom'\r\nimport { Editor } from '@tinymce/tinymce-react';\r\nimport {AuthContext} from '../../context/AuthContext'\r\nimport {useMessage} from '../../hooks/MessageHook'\r\nimport './AddNews.css'\r\nimport axios from 'axios'\r\nexport const AddNews = () =>{\r\n    const history = useHistory()\r\n    const message = useMessage()\r\n\r\n    const [form,setForm] = useState({\r\n        title:'',\r\n        content:'',\r\n        category:'',\r\n        preview:null,\r\n        images:null,\r\n    })\r\n    const {token} = useContext(AuthContext)\r\n\r\n    const createNews = async() =>{\r\n        try{\r\n            const img = new FormData()\r\n            Array.from(form.images).forEach((file,i)=>{\r\n                img.append(i,file)\r\n            })\r\n            const preview = Array.from(form.preview)\r\n            img.append('preview',preview[0])\r\n            img.append('len',form.images.length)\r\n\r\n            img.append('title',form.title)\r\n            img.append('content',form.content)\r\n            img.append('category',form.category)\r\n        \r\n            const data = await axios({\r\n                method:\"POST\",\r\n                url:'/api/news/add',\r\n                headers:{\r\n                    Authorization:`Bearer ${token}`\r\n                },\r\n                data:img\r\n            })\r\n            message(data.data.message)\r\n            setTimeout(()=>{\r\n                history.push('/')\r\n            },3000)\r\n        }catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n    const changeHandler = (event) =>{\r\n        setForm({...form,[event.target.name]:event.target.value})\r\n    }\r\n    const submitHandler = (event) =>{\r\n        event.preventDefault()\r\n\r\n    }\r\n    const fileUpload = (event) =>{\r\n        setForm({...form,[event.target.name]:event.target.files})\r\n    }\r\n    return (\r\n        <div className='content'>\r\n            <form className='add-form' onSubmit={event => submitHandler(event)}>\r\n                <div className=\"input-add\">\r\n                    <span>Заголовок</span>\r\n                    <input type='text' name='title' value={form.title} onChange={event => changeHandler(event)}/>\r\n                </div>\r\n                <div className=\"input-add\">\r\n                    <span>Категория</span>\r\n                    <select name='category' onChange={event => changeHandler(event)}>\r\n                        <option name='cat1'>Category 1</option>\r\n                        <option name='cat2'>Category 2</option>\r\n                        <option name='cat3'>Category 3</option>\r\n                        <option name='cat4'>Category 4</option>\r\n                    </select>\r\n                </div>\r\n                <div className=\"editor\">\r\n                    <Editor apiKey=\"66eiyabx1d4ze58ick0aqe6po9wgetbhpawmzjtwvz3mlbqs\" value={form.content} onEditorChange={content => setForm({...form,content})}/>\r\n                </div>\r\n                <div className=\"input-add\">\r\n                    <span>Превью</span>\r\n                    <input type='file' name='preview' onChange={event => fileUpload(event)}/>\r\n                </div>\r\n                <div className=\"input-add\">\r\n                    <span>Доп фото</span>\r\n                    <input type='file' name='images' multiple onChange={event => fileUpload(event)}/>\r\n                </div>\r\n                <div className=\"form-buttons\">\r\n                    <button onClick={createNews}>Create</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}","import {useCallback} from 'react'\r\nimport {useToasts} from 'react-toast-notifications'\r\nexport const useMessage = () =>{\r\n    const {addToast} = useToasts()\r\n    return useCallback(text =>{\r\n        if(text){\r\n            addToast(text,{appearance:'error',autoDismiss:true})\r\n        }\r\n    },[addToast])\r\n}","import React from 'react'\r\nimport './Navbar.css'\r\n\r\nexport const Navbar = () =>{\r\n    return (\r\n        <nav>\r\n            <div className=\"navbar-items\">\r\n                <div className=\"navbar-items__item\">\r\n                    <a href=\"/\">Page 1</a>\r\n                </div>\r\n                <div className=\"navbar-items__item\">\r\n                    <a href=\"/\">Page 1</a>\r\n                </div>\r\n                <div className=\"navbar-items__item\">\r\n                    <a href=\"/\">Page 1</a>\r\n                </div>\r\n                <div className=\"navbar-items__item\">\r\n                    <a href=\"/\">Page 1</a>\r\n                </div>\r\n                <div className=\"navbar-items__item\">\r\n                    <a href=\"/\">Page 1</a>\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    )\r\n}","import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport Item from './item.png'\r\nimport './Header.css'\r\n\r\nexport const Header = () =>{\r\n    return (\r\n        <div className=\"header\">\r\n            <div className=\"header-title\">\r\n                <Link to='/'>Title</Link>\r\n            </div>\r\n            <div className=\"header-contacts\">\r\n                <div className=\"header-contacts__item\">\r\n                <Link to='/'><img src={Item} alt=\"item\" /></Link>\r\n                </div>\r\n                <div className=\"header-contacts__item\">\r\n                <Link to='/'><img src={Item} alt=\"item\" /></Link>\r\n                </div>\r\n                <div className=\"header-contacts__item\">\r\n                <Link to='/'><img src={Item} alt=\"item\" /></Link>\r\n                </div>\r\n                <div className=\"header-contacts__item\">\r\n                <Link to='/'><img src={Item} alt=\"item\" /></Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport './SideBar.css'\r\n\r\n\r\nexport const SideBar = () =>{\r\n    return (\r\n        <div className=\"sidebar\">\r\n            <div className=\"sidebar-title\">Category</div>\r\n            <ul className=\"category-items\">\r\n                <li className=\"category-items__item\"><Link to='/'>Test category</Link></li>\r\n                <li className=\"category-items__item\"><Link to='/'>Test category</Link></li>\r\n                <li className=\"category-items__item\"><Link to='/'>Test category</Link></li>\r\n                <li className=\"category-items__item\"><Link to='/'>Test category</Link></li>\r\n                <li className=\"category-items__item\"><Link to='/'>Test category</Link></li>\r\n            </ul>\r\n        </div>\r\n    )\r\n}","import React from 'react';\nimport {BrowserRouter} from 'react-router-dom'\nimport {useAuth} from './hooks/AuthHook'\nimport {AuthContext} from './context/AuthContext'\nimport { useRoutes } from './routes'\nimport {Loader} from './components/Loader/Loader'\nimport { Navbar } from './components/Navbar/Navbar';\nimport {Header} from './components/Header/Header'\nimport {SideBar} from './components/SideBar/SideBar'\nimport {ToastProvider} from 'react-toast-notifications'\nimport './App.css'\n\n\nfunction App() {\n  const {token,userId,login,logout,ready} = useAuth()\n  const isAuthenticated = !!token\n  const routes = useRoutes(isAuthenticated)\n  if(!ready){\n    return <Loader />\n  }\n  return (\n    <ToastProvider>\n    <AuthContext.Provider value={{token,userId,login,logout,isAuthenticated}}>\n      <BrowserRouter>\n        <div className=\"container\">\n          <Header />\n          <Navbar />\n          <main>\n            {routes}\n            <SideBar />\n          </main>\n        </div>\n      </BrowserRouter>\n    </AuthContext.Provider>\n    </ToastProvider>\n  );\n}\n\nexport default App;\n","import {useState,useCallback,useEffect} from 'react'\r\nimport jwt from  'jwt-decode'\r\n\r\nconst storageName= 'userData'\r\n\r\nexport const useAuth = () =>{\r\n    const [token, setToken] = useState(null)\r\n    const [ready, setReady] = useState(false)\r\n    const [userId, setUserId] = useState(null)\r\n\r\n    const login = useCallback((jwtToken,id)=>{\r\n        setToken(jwtToken)\r\n        setUserId(id)\r\n        localStorage.setItem(storageName,JSON.stringify({userId:id,token:jwtToken}))\r\n    },[])\r\n\r\n    const isTokenExpired = useCallback(() => {\r\n        try {\r\n            const data = JSON.parse(localStorage.getItem(storageName))\r\n            if (data) {\r\n                const { exp } = jwt(data.token);\r\n                if (exp < (new Date().getTime() + 1) / 1000) {\r\n                    return false;\r\n                } else {\r\n                    return true;\r\n                }\r\n            } else {\r\n                return false\r\n            }\r\n        } catch (err) {\r\n\r\n            return false;\r\n        }\r\n    },[])\r\n    \r\n    const logout = useCallback(()=>{\r\n        setToken(null)\r\n        setUserId(null)\r\n        localStorage.removeItem(storageName)\r\n    },[])\r\n\r\n\r\n    useEffect(()=>{\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n        if(data && data.token) {\r\n            const auth = isTokenExpired()\r\n            if(!auth){\r\n                return logout()\r\n            }\r\n            login(data.token,data.userId)\r\n        }\r\n        setReady(true)\r\n    },[login,isTokenExpired,logout])\r\n\r\n\r\n    return {login,logout,token,userId,ready}\r\n}","import React from 'react'\r\nimport {Route,Switch,Redirect} from 'react-router-dom'\r\nimport { Auth } from './containers/Auth/Auth'\r\nimport { Main } from './containers/Main/Main'\r\nimport {DetailPage} from './containers/DetailPage/DetailPage'\r\nimport {AddNews} from './containers/AddNews/AddNews'\r\n\r\n\r\nexport const useRoutes = isAuthenticated =>{\r\n    if(isAuthenticated){\r\n        return (\r\n            <Switch>\r\n                <Route path='/' exact>\r\n                    <Main />\r\n                </Route>\r\n                <Route path='/admin/add' exact>\r\n                    <AddNews />\r\n                </Route>\r\n                <Route path='/detail/:id' exact>\r\n                    <DetailPage />\r\n                </Route>\r\n                <Redirect to='/' />\r\n            </Switch>\r\n        )\r\n    }else {\r\n        return (\r\n            <Switch>\r\n                <Route path='/admin/auth'>\r\n                    <Auth />\r\n                </Route>\r\n                <Route path='/' exact>\r\n                    <Main />\r\n                </Route>\r\n                <Route path='/detail/:id' exact>\r\n                    <DetailPage />\r\n                </Route>\r\n                <Redirect to='/' />\r\n            </Switch>\r\n        )\r\n    }\r\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAACb0lEQVRoge2ZPUtbURiAn0iNkI9WbaQFPxZxcFCUlDQOQlBQTF3dXNvf4B9ooKlQC+JglxZd3PwAFxclCkkgNZNTioJDbRA0QYOKejuchKQtic05qT0t54Es955z3/e59z33vNzYLMuy+A+wWX19/77I7i51fzuHWmFEdMOI6IYR0Q0johtGRDeMiG4YEd14cG+RJiZgeBiamyGVguVliMfFuSdPwe0SxyWRFxkchKEheDsNufPy4xxOCL+BgQGoyxdAV5eYu7UFTU3Q1gazs0oi8qXV3w/BILyfEXe0HFNTP0oUaGiAkRHo7YWdHSHT3i6djrzIYw/Y7eD1wod5UTY/09MDz7y/SpRSXw+jo5DJwOGhdDryIkdf4eoKbDZxJ0MhmJsDn684prUVnM7K18lkYHoalpakUwGVNbKxAWNjxXKw20UJ+f1wfAwHByLJuzg9hdVV6TQKyIv4fJD4DG43NDYWj9ts0NIifveIvIjHAy+CosZVSKfV5ueRXyPxOJycqEW/uYHUF7Vr5JEXiUZhZQVyOfno2SzEovLzS1Db2T9+Eot1fBw6O8WCr4a9PYhElFIooCaSO4dAALq7q5+bzcL6ulL4UtSbxoWF6jey21vY3tZMJBKBl6/EXpBOw10f9y0LEgl4HVIOXUpt2vhvR7C/D9fXlcdZFiSTEA5XbjQlkFsjfr9o+BwO6OgQrYjbLTbDclxewtoavJupuQTIikSjcHEBk5OiRXG5yo89O4NYDBYXxdP4Q8i/tZLJYmKBADz3w6OHxfOZ/B6xuamU4O9i/rHSDSOiG0ZEN4yIbhgR3TAiumFEdMOI6MZ3yGGjHnMOsnAAAAAASUVORK5CYII=\""],"sourceRoot":""}