(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,t){},104:function(e,t){},122:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},140:function(e,t,a){},145:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),i=(a(85),a(4)),o=a(7),s=a(71),m=a.n(s);var u=Object(n.createContext)({token:null,userId:null,login:void 0,logout:void 0,isAuthenticated:!1}),d=a(15),E=a(19),p=a(5),f=a.n(p),v=a(16),b=a(11),g=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),l=Object(o.a)(c,2),i=l[0],s=l[1];return{loading:a,request:Object(n.useCallback)(function(){var e=Object(b.a)(f.a.mark((function e(t){var a,n,c,l,i,o=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"GET",n=o.length>2&&void 0!==o[2]?o[2]:null,c=o.length>3&&void 0!==o[3]?o[3]:{},r(!0),e.prev=4,n&&(n=JSON.stringify(n),console.log(c),c["Content-Type"]=c["Content-Type"]?c["Content-Type"]:"application/json",console.log(c)),e.next=8,fetch(t,{method:a,body:n,headers:c});case 8:return l=e.sent,e.next=11,l.json();case 11:if(i=e.sent,l.ok){e.next=14;break}throw new Error(i.message||"\u0427\u0442\u043e \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 14:return r(!1),e.abrupt("return",i);case 18:throw e.prev=18,e.t0=e.catch(4),r(!1),s(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:i,clearError:Object(n.useCallback)((function(){return s(null)}),[])}},h=(a(89),function(){var e=Object(n.useState)({email:"",password:""}),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(u),i=g().request,s=function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("/api/auth/login","POST",Object(v.a)({},a));case 3:t=e.sent,l.login(t.token,t.userId),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("/api/auth/register","POST",Object(v.a)({},a));case 3:t=e.sent,console.log(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),d=function(e){c(Object(v.a)({},a,Object(E.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){console.log(a)}),[a]),r.a.createElement("div",{className:"auth-form"},r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault()}(e)}},r.a.createElement("div",{className:"input-group"},r.a.createElement("span",null,"Email"),r.a.createElement("input",{type:"email",name:"email",value:a.email,onChange:d})),r.a.createElement("div",{className:"input-group"},r.a.createElement("span",null,"Password"),r.a.createElement("input",{type:"password",name:"password",value:a.password,onChange:d})),r.a.createElement("button",{className:"login-button",onClick:s},"Login"),r.a.createElement("button",{className:"register-button",onClick:m},"Register")))}),O=a(72),w=a.n(O),N=a(73),j=a.n(N),y=(a(122),function(e){var t=e.item;return r.a.createElement("article",{className:"news-list__item"},r.a.createElement("div",{className:"item-img"},r.a.createElement("img",{src:"http://localhost:5000/"+t.preview,alt:"item",width:"330px",height:"250px"})),r.a.createElement("div",{className:"item-info"},r.a.createElement("div",{className:"item-date"},j()(t.createdAt).format("MMMM Do YYYY")+"/ Admin"),r.a.createElement("div",{className:"item-title"},t.title,"."),r.a.createElement("div",{className:"item-text"},w()(t.text)),r.a.createElement("div",{className:"item-buttons"},r.a.createElement(i.b,{to:"/detail/"+t._id},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0447\u0438\u0442\u0430\u0442\u044c"))))}),x=function(e){var t=e.news;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement(y,{item:e,key:t})})))},k=(a(127),function(){return r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"lds-facebook"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),A=(a(128),function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],l=g(),i=l.request,s=l.loading,m=Object(n.useCallback)(Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("/api/news/load","GET");case 3:t=e.sent,c(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i]);return Object(n.useEffect)((function(){m()}),[m]),s?r.a.createElement(k,null):r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"news-list"},r.a.createElement(x,{news:a})))}),C=a(76),S=a.n(C),T=(a(140),function(){var e=Object(d.h)().id,t=g(),a=t.request,c=t.loading,l=Object(n.useState)({}),i=Object(o.a)(l,2),s=i[0],m=i[1],u=Object(n.useCallback)(Object(b.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a("/api/news/get/".concat(e),"GET");case 2:n=t.sent,m(n);case 4:case"end":return t.stop()}}),t)}))),[a,e]);return Object(n.useEffect)((function(){u()}),[u]),c?r.a.createElement(k,null):r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"news"},r.a.createElement("div",{className:"news-title"},s.title),r.a.createElement("div",{className:"news-info"},r.a.createElement("div",{className:"news-img"},r.a.createElement("img",{src:"http://localhost:5000/"+s.preview,alt:"preview",width:"350px",height:"250px"})),r.a.createElement("div",{className:"news-text"},S()("".concat(s.text)))),r.a.createElement("div",{className:"news-images"},console.log(s.images))))}),D=a(78),I=a(31),_=(a(145),a(77)),Y=a.n(_),J=function(){var e=Object(d.g)(),t=function(){var e=Object(I.useToasts)().addToast;return Object(n.useCallback)((function(t){t&&e(t,{appearance:"error",autoDismiss:!0})}),[e])}(),a=Object(n.useState)({title:"",content:"",category:"",preview:null,images:null}),c=Object(o.a)(a,2),l=c[0],i=c[1],s=Object(n.useContext)(u).token,m=function(){var a=Object(b.a)(f.a.mark((function a(){var n,r,c;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=new FormData,Array.from(l.images).forEach((function(e,t){n.append(t,e)})),r=Array.from(l.preview),n.append("preview",r[0]),n.append("len",l.images.length),n.append("title",l.title),n.append("content",l.content),n.append("category",l.category),a.next=11,Y()({method:"POST",url:"/api/news/add",headers:{Authorization:"Bearer ".concat(s)},data:n});case 11:c=a.sent,t(c.data.message),setTimeout((function(){e.push("/")}),3e3),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),console.log(a.t0);case 19:case"end":return a.stop()}}),a,null,[[0,16]])})));return function(){return a.apply(this,arguments)}}(),p=function(e){i(Object(v.a)({},l,Object(E.a)({},e.target.name,e.target.value)))},g=function(e){i(Object(v.a)({},l,Object(E.a)({},e.target.name,e.target.files)))};return r.a.createElement("div",{className:"content"},r.a.createElement("form",{className:"add-form",onSubmit:function(e){return function(e){e.preventDefault()}(e)}},r.a.createElement("div",{className:"input-add"},r.a.createElement("span",null,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"),r.a.createElement("input",{type:"text",name:"title",value:l.title,onChange:function(e){return p(e)}})),r.a.createElement("div",{className:"input-add"},r.a.createElement("span",null,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),r.a.createElement("select",{name:"category",onChange:function(e){return p(e)}},r.a.createElement("option",{name:"cat1"},"Category 1"),r.a.createElement("option",{name:"cat2"},"Category 2"),r.a.createElement("option",{name:"cat3"},"Category 3"),r.a.createElement("option",{name:"cat4"},"Category 4"))),r.a.createElement("div",{className:"editor"},r.a.createElement(D.a,{apiKey:"66eiyabx1d4ze58ick0aqe6po9wgetbhpawmzjtwvz3mlbqs",value:l.content,onEditorChange:function(e){return i(Object(v.a)({},l,{content:e}))}})),r.a.createElement("div",{className:"input-add"},r.a.createElement("span",null,"\u041f\u0440\u0435\u0432\u044c\u044e"),r.a.createElement("input",{type:"file",name:"preview",onChange:function(e){return g(e)}})),r.a.createElement("div",{className:"input-add"},r.a.createElement("span",null,"\u0414\u043e\u043f \u0444\u043e\u0442\u043e"),r.a.createElement("input",{type:"file",name:"images",multiple:!0,onChange:function(e){return g(e)}})),r.a.createElement("div",{className:"form-buttons"},r.a.createElement("button",{onClick:m},"Create"))))},P=(a(162),function(){return r.a.createElement("nav",null,r.a.createElement("div",{className:"navbar-items"},r.a.createElement("div",{className:"navbar-items__item"},r.a.createElement("a",{href:"/"},"Page 1")),r.a.createElement("div",{className:"navbar-items__item"},r.a.createElement("a",{href:"/"},"Page 1")),r.a.createElement("div",{className:"navbar-items__item"},r.a.createElement("a",{href:"/"},"Page 1")),r.a.createElement("div",{className:"navbar-items__item"},r.a.createElement("a",{href:"/"},"Page 1")),r.a.createElement("div",{className:"navbar-items__item"},r.a.createElement("a",{href:"/"},"Page 1"))))}),B=a(27),U=a.n(B),z=(a(163),function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header-title"},r.a.createElement(i.b,{to:"/"},"Title")),r.a.createElement("div",{className:"header-contacts"},r.a.createElement("div",{className:"header-contacts__item"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{src:U.a,alt:"item"}))),r.a.createElement("div",{className:"header-contacts__item"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{src:U.a,alt:"item"}))),r.a.createElement("div",{className:"header-contacts__item"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{src:U.a,alt:"item"}))),r.a.createElement("div",{className:"header-contacts__item"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{src:U.a,alt:"item"})))))}),F=(a(164),function(){return r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebar-title"},"Category"),r.a.createElement("ul",{className:"category-items"},r.a.createElement("li",{className:"category-items__item"},r.a.createElement(i.b,{to:"/"},"Test category")),r.a.createElement("li",{className:"category-items__item"},r.a.createElement(i.b,{to:"/"},"Test category")),r.a.createElement("li",{className:"category-items__item"},r.a.createElement(i.b,{to:"/"},"Test category")),r.a.createElement("li",{className:"category-items__item"},r.a.createElement(i.b,{to:"/"},"Test category")),r.a.createElement("li",{className:"category-items__item"},r.a.createElement(i.b,{to:"/"},"Test category"))))});a(165);var G=function(){var e=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),l=Object(o.a)(c,2),i=l[0],s=l[1],u=Object(n.useState)(null),d=Object(o.a)(u,2),E=d[0],p=d[1],f=Object(n.useCallback)((function(e,t){r(e),p(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e}))}),[]),v=Object(n.useCallback)((function(){try{var e=JSON.parse(localStorage.getItem("userData"));return!!e&&!(m()(e.token).exp<((new Date).getTime()+1)/1e3)}catch(t){return!1}}),[]),b=Object(n.useCallback)((function(){r(null),p(null),localStorage.removeItem("userData")}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));if(e&&e.token){if(!v())return b();f(e.token,e.userId)}s(!0)}),[f,v,b]),{login:f,logout:b,token:a,userId:E,ready:i}}(),t=e.token,a=e.userId,c=e.login,l=e.logout,s=e.ready,E=!!t,p=function(e){return e?r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/",exact:!0},r.a.createElement(A,null)),r.a.createElement(d.b,{path:"/admin/add",exact:!0},r.a.createElement(J,null)),r.a.createElement(d.b,{path:"/detail/:id",exact:!0},r.a.createElement(T,null)),r.a.createElement(d.a,{to:"/"})):r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/admin/auth"},r.a.createElement(h,null)),r.a.createElement(d.b,{path:"/",exact:!0},r.a.createElement(A,null)),r.a.createElement(d.b,{path:"/detail/:id",exact:!0},r.a.createElement(T,null)),r.a.createElement(d.a,{to:"/"}))}(E);return s?r.a.createElement(I.ToastProvider,null,r.a.createElement(u.Provider,{value:{token:t,userId:a,login:c,logout:l,isAuthenticated:E}},r.a.createElement(i.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(z,null),r.a.createElement(P,null),r.a.createElement("main",null,p,r.a.createElement(F,null)))))):r.a.createElement(k,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},27:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAzCAYAAADVY1sUAAACb0lEQVRoge2ZPUtbURiAn0iNkI9WbaQFPxZxcFCUlDQOQlBQTF3dXNvf4B9ooKlQC+JglxZd3PwAFxclCkkgNZNTioJDbRA0QYOKejuchKQtic05qT0t54Es955z3/e59z33vNzYLMuy+A+wWX19/77I7i51fzuHWmFEdMOI6IYR0Q0johtGRDeMiG4YEd14cG+RJiZgeBiamyGVguVliMfFuSdPwe0SxyWRFxkchKEheDsNufPy4xxOCL+BgQGoyxdAV5eYu7UFTU3Q1gazs0oi8qXV3w/BILyfEXe0HFNTP0oUaGiAkRHo7YWdHSHT3i6djrzIYw/Y7eD1wod5UTY/09MDz7y/SpRSXw+jo5DJwOGhdDryIkdf4eoKbDZxJ0MhmJsDn684prUVnM7K18lkYHoalpakUwGVNbKxAWNjxXKw20UJ+f1wfAwHByLJuzg9hdVV6TQKyIv4fJD4DG43NDYWj9ts0NIifveIvIjHAy+CosZVSKfV5ueRXyPxOJycqEW/uYHUF7Vr5JEXiUZhZQVyOfno2SzEovLzS1Db2T9+Eot1fBw6O8WCr4a9PYhElFIooCaSO4dAALq7q5+bzcL6ulL4UtSbxoWF6jey21vY3tZMJBKBl6/EXpBOw10f9y0LEgl4HVIOXUpt2vhvR7C/D9fXlcdZFiSTEA5XbjQlkFsjfr9o+BwO6OgQrYjbLTbDclxewtoavJupuQTIikSjcHEBk5OiRXG5yo89O4NYDBYXxdP4Q8i/tZLJYmKBADz3w6OHxfOZ/B6xuamU4O9i/rHSDSOiG0ZEN4yIbhgR3TAiumFEdMOI6MZ3yGGjHnMOsnAAAAAASUVORK5CYII="},80:function(e,t,a){e.exports=a(166)},85:function(e,t,a){},89:function(e,t,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.eacf35e7.chunk.js.map